webpackJsonp([23],{hnam:function(t,e){},j8Xd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("TVG1");var s=a("M4fF"),o=a.n(s),i={name:"functionSet",data:function(){var t=this;return{loading:!0,showModal:!1,modalTitle:"新增栏目",columns:[{title:"栏目名称",key:"typeName"},{title:"服务数量",key:"serviceNum"},{title:"服务说明",key:"typeDes"},{title:"发布日期",key:"createTime"},{title:"操作",key:"",render:function(e,a){var s=t;return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px"},on:{click:function(){s.showModalHandle("edit",a.row.id)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){s.$store.commit("setDeleteModal",{model:!0,callback:function(){s.deleteSingle(a.row.id)}})}}},"删除")])}}],lists:[],modalForm:{typeName:"",typeDes:""}}},methods:{dragSort:function(t,e){var a=this,s=[{id:this.lists[t].id},{id:this.lists[e].id}];this.$http.post("/yyht/v1/service/type/updateServiceTypeSort",s).then(function(s){if(0===s.data.code){a.$Message.success("排序成功");var i=o.a.cloneDeep(a.lists),l=o.a.cloneDeep(i[t]);i[t]=i[e],i[e]=l,a.lists=i}else a.$Message.warning("排序失败")})},showModalHandle:function(t,e){"add"===t?(this.showModal=!0,this.modalTitle="新增栏目"):this.searchById(e)},searchById:function(t){var e=this;this.$http.get("/yyht/v1/service/type/getServiceTypeById?id="+t).then(function(t){0===t.data.code&&(e.modalTitle="编辑栏目",e.modalForm=t.data.data,e.showModal=!0)})},cancelModal:function(){this.showModal=!1,this.modalForm={typeName:"",typeDes:""}},deleteSingle:function(t){var e=this;this.$http.post("/yyht/v1/service/type/delete?id="+t).then(function(t){0==t.data.code?(e.$Message.success("删除成功"),e.getCol()):e.$Message.warning(t.data.msg),e.$store.commit("setDeleteModal",{model:!1})})},getCol:function(){var t=this;this.loading=!0,this.$http.get("/yyht/v1/service/type/getAllServiceType").then(function(e){0==e.data.code?(t.lists=e.data.data,t.loading=!1):t.$Message.warning(e.data.msg)})},saveModalForm:function(){var t=this,e=this.modalForm;e.typeName?this.$http.post("/yyht/v1/service/type/saveOrUpdate",e).then(function(e){t.showModal=!1,0===e.data.code?t.$Message.success("保存成功"):t.$Message.warning("保存失败")}):this.$Message.warning("请输入栏目名称")}},mounted:function(){this.getCol()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-right"},[a("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:function(e){t.showModalHandle("add")}}},[t._v("新增栏目")])],1)]),t._v(" "),a("Table",{attrs:{columns:t.columns,data:t.lists,draggable:!0},on:{"on-drag-drop":t.dragSort}})],1),t._v(" "),a("Modal",{attrs:{title:"新增栏目"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("Form",{attrs:{"label-width":100}},[a("FormItem",{staticClass:"must",attrs:{label:"栏目名称"}},[a("Input",{model:{value:t.modalForm.typeName,callback:function(e){t.$set(t.modalForm,"typeName",e)},expression:"modalForm.typeName"}}),t._v(" "),a("p",{staticClass:"tips"},[t._v("（最多5个字）")])],1),t._v(" "),a("FormItem",{attrs:{label:"栏目描述"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.modalForm.typeDes,callback:function(e){t.$set(t.modalForm,"typeDes",e)},expression:"modalForm.typeDes"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.cancelModal}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.saveModalForm}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,l,!1,function(t){a("hnam")},"data-v-4a3c05e6",null);e.default=n.exports}});