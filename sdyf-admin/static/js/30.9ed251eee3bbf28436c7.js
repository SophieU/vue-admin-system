webpackJsonp([30],{"9Hyn":function(e,t){},NhQq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content"},[a("Card",{staticClass:"box-card"},[a("div",{staticClass:"mb-15 clearfix"},[a("Form",{ref:"searchFormRef",staticClass:"pull-left",attrs:{inline:"",model:e.searchForm,"label-width":100}},[a("FormItem",{attrs:{label:"广告主名称",prop:"ownerName"}},[a("Input",{attrs:{placeholder:"请输入广告主名称"},model:{value:e.searchForm.ownerName,callback:function(t){e.$set(e.searchForm,"ownerName",t)},expression:"searchForm.ownerName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"联系电话",prop:"phone"}},[a("Input",{attrs:{placeholder:"请输入广告主电话"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1),e._v(" "),a("FormItem",{staticClass:"no-label-form-item"},[a("Button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("Button",{on:{click:function(t){e.onReset("searchFormRef")}}},[e._v("清空")])],1)],1),e._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addModal.show=!0,e.addModal.type="add"}}},[e._v("新增广告主")])],1)],1),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.advertiserLists,loading:e.loading}}),e._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{total:e.pageConfig.total,current:e.pageConfig.current,"page-size":e.pageConfig.size,"show-elevator":"","show-sizer":""},on:{"on-change":e.handleCurrentChange,"on-page-size-change":e.handleSizeChange}})],1)],1),e._v(" "),a("Modal",{attrs:{title:"add"===e.addModal.type?"新增广告主":"编辑广告主",width:"30%"},on:{"on-visible-change":e.visibleChange},model:{value:e.addModal.show,callback:function(t){e.$set(e.addModal,"show",t)},expression:"addModal.show"}},[a("div",{staticClass:"modal-form"},[a("Form",{ref:"addForm",attrs:{model:e.addModal.form,rules:e.rules,"label-width":100}},[a("FormItem",{attrs:{label:"广告主",prop:"ownerName"}},[a("Input",{staticStyle:{width:"250px"},model:{value:e.addModal.form.ownerName,callback:function(t){e.$set(e.addModal.form,"ownerName",t)},expression:"addModal.form.ownerName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"联系电话",prop:"ownerPhone"}},[a("Input",{staticStyle:{width:"250px"},attrs:{maxlength:11},model:{value:e.addModal.form.ownerPhone,callback:function(t){e.$set(e.addModal.form,"ownerPhone",t)},expression:"addModal.form.ownerPhone"}})],1),e._v(" "),a("FormItem",{attrs:{label:"联系地址",prop:"ownerAddress"}},[a("Input",{staticStyle:{width:"250px"},model:{value:e.addModal.form.ownerAddress,callback:function(t){e.$set(e.addModal.form,"ownerAddress",t)},expression:"addModal.form.ownerAddress"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.addModal.show=!1}}},[e._v("取 消")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.disabledBtn},on:{click:function(t){e.submitAdd("addForm")}}},[e._v("完成")])],1)]),e._v(" "),a("Modal",{attrs:{width:"30%"},on:{close:function(t){e.deleteModal.adOwnerId=""}},model:{value:e.deleteModal.show,callback:function(t){e.$set(e.deleteModal,"show",t)},expression:"deleteModal.show"}},[a("div",[e._v("\n            确定删除该广告主吗\n        ")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",disabled:e.disabledBtn},on:{click:function(t){e.submitDelete()}}},[e._v("删除")]),e._v(" "),a("Button",{on:{click:function(t){e.deleteModal.show=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")({name:"advertiser",data:function(){var e=this;return{loading:!0,searchForm:{name:"",phone:""},disabledBtn:!1,advertiserLists:[],pageConfig:{current:1,size:10,total:0},addModal:{type:"add",show:!1,form:{ownerName:"",ownerPhone:"",ownerAddress:"",id:""}},deleteModal:{show:!1,adOwnerId:""},rules:{ownerName:[{required:!0,message:"请输入广告主",trigger:"blur"}],ownerPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],ownerAddress:[{required:!0,message:"请输入联系地址",trigger:"blur"}]},columns:[{title:"序号",align:"center",render:function(e,t){return e("span",{},t.row._index+1)}},{title:"广告主名称",key:"ownerName",align:"center"},{title:"联系地址",key:"ownerAddress",align:"center"},{title:"联系电话",key:"ownerPhone",align:"center"},{title:"正在投放广告数",key:"countNum",align:"center"},{title:"操作",width:240,align:"center",render:function(t,a){var o=e;return a.row.id,t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px"},on:{click:function(){o.goDetail(a.row)}}},"查看广告"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px"},on:{click:function(){o.showEdit(a.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){o.showDelete(a.row.id)}}},"删除")])}}]}},methods:{onSearch:function(){var e=this;this.loading=!0;var t={ownerName:this.searchForm.ownerName,ownerPhone:this.searchForm.phone,pageNo:this.pageConfig.current,pageSize:this.pageConfig.size};this.$http.post("/yyht/v1/ad/owner/get/adOwner/show/pageList",t).then(function(t){0===t.data.code?(e.advertiserLists=t.data.data.list,e.pageConfig.current=t.data.data.pageNo,e.pageConfig.total=t.data.data.totalCount,e.loading=!1):e.$Message.warning(t.data.msg)})},onReset:function(e){this.$refs[e].resetFields()},handleSizeChange:function(e){this.pageConfig.size=e,this.pageConfig.current=1,this.onSearch()},handleCurrentChange:function(e){this.pageConfig.current=e,this.onSearch()},showEdit:function(e){this.addModal.type="edit",this.addModal.form={ownerName:e.ownerName,ownerPhone:e.ownerPhone,ownerAddress:e.ownerAddress,id:e.id},this.addModal.show=!0},submitAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$Message.error("表单填写错误"),!1;t.disabledBtn=!0;var a={ownerAddress:t.addModal.form.ownerAddress,ownerName:t.addModal.form.ownerName,ownerPhone:t.addModal.form.ownerPhone,ownerState:"IN_COOPERATION"};"edit"===t.addModal.type&&(a.adOwnerId=t.addModal.form.id),t.$http.post("/yyht/v1/ad/owner/addOrUpdate",a).then(function(e){t.disabledBtn=!1,0===e.data.code?("add"===t.addModal.type?t.$Message.success("添加成功"):"edit"===t.addModal.type&&t.$Message.success("修改成功"),t.addModal.show=!1,t.onSearch()):t.$Message.error(e.data.msg)})})},showDelete:function(e){this.deleteModal.show=!0,this.deleteModal.adOwnerId=e},submitDelete:function(){var e=this;this.disabledBtn=!0;var t=this.deleteModal.adOwnerId;this.$http.post("/yyht/v1/ad/owner/delete?adOwnerId="+t,{headers:{"Content-Type":"application/json"}}).then(function(t){e.disabledBtn=!1,0===t.data.code?(e.$Message.success("删除成功"),e.deleteModal.show=!1,e.onSearch()):e.$Message.error(t.data.msg)})},goDetail:function(e){this.$router.replace({name:"advertiserDetail",query:{id:e.id}})},restAddForm:function(){this.$refs.addForm.resetFields(),this.addModal.form={name:"",phone:"",address:"",id:""}},visibleChange:function(e){!1===e&&this.restAddForm()}},mounted:function(){this.onSearch()}},o,!1,function(e){a("9Hyn")},"data-v-1ba60d72",null);t.default=r.exports}});