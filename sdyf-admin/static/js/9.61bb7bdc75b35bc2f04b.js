webpackJsonp([9],{"0PqJ":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("mvHQ"),i=r.n(a),n=r("Dd8w"),s=r.n(n),o=r("woOf"),l=r.n(o),c=r("TVG1"),u={name:"order-search",components:{createOrder:r("spv5").a},computed:{downLink:function(){return localStorage.getItem("baseURL")+"/repair/order/list/export"}},data:function(){var e=this;return{telValid:!0,showModal:!1,filter:!1,currentTab:"",repairFirst:[],repairSecond:[],orderNav:[{title:"所有工单",state:"",count:0,check:!0},{title:"待分配",state:"ASSIGNED",count:0},{title:"待上门",state:"WAIT_DOOR",count:0},{title:"已上门",state:"WAITING_DOOR",count:0},{title:"待付款",state:"STAY_PAY",count:0},{title:"待服务",state:"WAIT_SERVICE",count:0},{title:"已完成",state:"FINISH",count:0},{title:"售后中",state:"AFTER_SALE",count:0},{title:"已取消",state:"CANCEL",count:0},{title:"已关闭",state:"CLOSED",count:0},{title:"异常",state:"EXCEPTION",count:0}],columns:[{title:"创建日期",key:"createTime",sortable:!0,align:"center",minWidth:150},{title:"客户手机",key:"userPhone",align:"center",width:120},{title:"客户姓名",key:"userName",align:"center",width:120},{title:"服务项目",key:"repairCategoryName",align:"center",width:100},{title:"服务网点",key:"stationName",align:"center",width:100},{title:"服务人员",key:"receiveUserName",align:"center",width:100},{title:"工单状态",key:"orderState",align:"center",width:100,render:function(e,t){return e("span",{ASSIGNED:"待分配",WAIT_DOOR:"待上门",STAY_PAY:"代付款",FINISH:"已完成",CANCEL:"已取消",CLOSED:"已关闭",EXCEPTIO:"异常"}[t.row.orderState])}},{title:"报修地址",key:"repairAddress",align:"center",width:100},{title:"回访记录",key:"hasReturnVisit",align:"center",width:100,render:function(e,t){return e("span",{},"Y"===t.row.hasReturnVisit?"有":"无")}},{title:"客户评价",key:"commentResult",align:"center",width:100,render:function(e,t){var r={1:"未评价",2:"满意",3:"不满意"}[t.row.commentState];return r||(r="暂无评价"),e("span",r)}},{title:"工单编号",key:"orderSn",align:"center",minWidth:200},{title:"操作",fixed:"right",align:"center",width:150,render:function(t,r){var a=e;return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"8px"},on:{click:function(){var e=r.row.id;sessionStorage.setItem("viewOrderId",e),a.$router.push({name:"orderDetail",query:{id:e}})}}},"查看"),t("Button",{props:{type:"success",size:"small"},on:{click:function(){var e=r.row.id,t=r.row.orderState,i=r.row.isInWarrantyPeriod;sessionStorage.setItem("viewOrderId",e),a.$router.push({name:"orderControl",query:{id:e,state:t,isWarranty:i}})}}},"处理订单")])}}],lists:[],filterForm:{},loadingTable:!1,inFilter:!1,pageNo:1,pageSize:10,totalCount:0,repairLists:[],stationLists:[],regionLists:[],filterRegionList:[],filterDateOptions:{disabledDate:function(e){return e.valueOf()>Date.now()}}}},methods:{repairFirstChange:function(e,t){var r=this;c.a.getRepairTypeNext(e,function(e){"modal"===t?r.repairLists=e:r.repairSecond=e})},regionFilter:function(e){var t=this.regionLists.filter(function(t){return t.name.indexOf(e)>-1});this.filterRegionList=t},validateTel:function(e){/^1[3456789]\d{9}/.test(e)?this.telValid=!0:this.telValid=!1,e||(this.telValid=!0)},toggleTab:function(e){var t=this,r=this.orderNav.map(function(r,a){return a===e?(r.check=!0,t.currentTab=r.state):r.check=!1,r});this.orderNav=r},closeModal:function(e){this.showModal=!1,this.clearFilter()},getLists:function(e,t,r){var a=this;this.loadingTable=!0;var i={pageNo:this.pageNo,pageSize:this.pageSize};"page"===e?i.pageNo=t:"size"===e&&(i.pageSize=t);var n=this.currentTab;n&&(i.orderStateList=[n]),r&&(delete r.dateRange,i=l()({},i,r)),this.$http.post("/yyht/v1/repair/order/pageList",s()({},i)).then(function(e){if(a.loadingTable=!1,0===e.data.code){var t=e.data.data;a.lists=t.list,a.pageSize=t.pageSize,a.totalCount=t.totalCount,i.orderStateList||(a.orderNav[0].count=t.totalCount)}else console.log("工单列表获取失败："+e.data.msg);a.filter=!1})},filterDateChange:function(e){this.filterForm.createTimeStart=e[0],this.filterForm.createTimeEnd=e[1]},clearFilter:function(){this.filterForm={hasEvidence:"",hasReturnVisit:"",isWarranty:"",afterSaleRecord:"",commentState:"",username:"",regionName:"",repairStationId:"",repairCategoryParentId:""},this.filter=!1,this.inFilter=!1,this.pageNo=1,this.getLists()},sureFilter:function(){var e=s()({},this.filterForm);delete e.dateRange,this.inFilter=!0,this.pageNo=1,this.getLists(null,null,e)},pageChange:function(e){this.pageNo=e;var t=s()({},this.filterForm);delete t.dateRange,c.a.formatterParams(t).length>0&&(this.inFilter=!0),this.getLists("page",e,t)},pageSizeChange:function(e){this.pageSize=e;var t=s()({},this.filterForm);delete t.dateRange,c.a.formatterParams(t).length>0&&(this.inFilter=!0),this.getLists("size",e,t)},getStateCount:function(){var e=this;this.$http.get("/yyht/v1/repair/order/state/count").then(function(t){if(0===t.data.code){var r=t.data.data;e.orderNav=e.orderNav.map(function(e){for(var t=0;t<r.length;t++){var a=r[t].state;if(e.state===a){var i=parseInt(r[t].countNum);e.count=i}}return e})}else console.log("/repair/order/state/count:"+t.data.msg)})}},mounted:function(){var e=this,t=this.$route.query;if("home"===t.from){var r=new Date,a=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();if("today"===t.type){var n={createTimeStart:a,createTimeEnd:a};this.filterForm=l()({},n,{dateRange:[a,a]}),this.getLists(null,null,n)}else if("month"===t.type){var s=r.getFullYear()+"-"+(r.getMonth()+1)+"-1",o={createTimeStart:s,createTimeEnd:a};this.filterForm=l()({},o,{dateRange:[s,a]}),this.getLists(null,null,o)}else this.getLists()}else if("meal"===t.from){var u=t.serviceId;this.filterForm={serviceId:u},this.getLists(null,null,this.filterForm)}else this.getLists();this.getStateCount(),c.a.getRepairTypeDropdown(function(t){e.repairFirst=t}),c.a.getStationLists(function(t){e.stationLists=t}),c.a.getRegion(function(t){e.regionLists=t,e.filterRegionList=JSON.parse(i()(t))})},watch:{currentTab:function(e){var t=s()({},this.filterForm);delete t.dateRange,this.pageNo=1,this.pageSize=10,this.totalCount=0,this.inFilter=!1,this.getLists(null,null,t)}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",[r("ul",{staticClass:"tab-nav mb-15"},e._l(e.orderNav,function(t,a){return r("li",{key:t.title,class:t.check?"nav-active":"",on:{click:function(t){e.toggleTab(a)}}},[r("Badge",{attrs:{count:t.count,"overflow-count":99}},[r("span",{staticClass:"nav-title"},[e._v(e._s(t.title))])])],1)})),e._v(" "),r("div",{staticClass:"tab-content"},[r("div",{staticClass:"mb-15 headerForm"},[r("i-form",{attrs:{model:e.filterForm,inline:"","label-width":100}},[r("form-item",{attrs:{label:"联系人姓名："}},[r("Input",{model:{value:e.filterForm.username,callback:function(t){e.$set(e.filterForm,"username",t)},expression:"filterForm.username"}})],1),e._v(" "),r("form-item",{attrs:{label:"报修区域："}},[r("Select",{attrs:{placeholder:"请选择小区",filterable:""},on:{"on-query-change":e.regionFilter},model:{value:e.filterForm.regionName,callback:function(t){e.$set(e.filterForm,"regionName",t)},expression:"filterForm.regionName"}},e._l(e.filterRegionList,function(t,a){return r("Option",{key:a,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("form-item",{attrs:{label:"服务网点："}},[r("Select",{staticStyle:{width:"150px"},model:{value:e.filterForm.repairStationId,callback:function(t){e.$set(e.filterForm,"repairStationId",t)},expression:"filterForm.repairStationId"}},e._l(e.stationLists,function(t,a){return r("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("form-item",{attrs:{label:"创建时间："}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{options:e.filterDateOptions,type:"daterange"},on:{"on-change":e.filterDateChange},model:{value:e.filterForm.dateRange,callback:function(t){e.$set(e.filterForm,"dateRange",t)},expression:"filterForm.dateRange"}})],1),e._v(" "),r("form-item",{staticStyle:{"margin-left":"-100px"}},[r("Button",{attrs:{type:"primary"},on:{click:e.sureFilter}},[e._v("查询")]),e._v(" "),r("Button",{on:{click:e.clearFilter}},[e._v("清空")])],1)],1)],1),e._v(" "),r("div",{staticClass:"clearfix mb-15"},[r("div",{staticClass:"pull-left"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.showModal=!0}}},[e._v("新建")]),e._v(" "),r("Button",{on:{click:function(t){e.filter=!0}}},[e._v("所有查询条件")])],1)]),e._v(" "),r("div",{staticClass:"tabler-wrapper"},[r("Table",{attrs:{columns:e.columns,data:e.lists,loading:e.loadingTable}}),e._v(" "),r("div",{staticClass:"pagination"},[r("Page",{attrs:{total:e.totalCount,"show-elevator":"",current:e.pageNo},on:{"update:current":function(t){e.pageNo=t},"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}})],1)],1)]),e._v(" "),r("create-order",{attrs:{createOrder:e.showModal},on:{close:e.closeModal}}),e._v(" "),r("Drawer",{attrs:{width:"425",title:"工单筛选","mask-closable":!1},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[r("div",{staticClass:"clearfix mb-15"},[r("div",{staticClass:"pull-left"},[r("Button",{on:{click:e.clearFilter}},[e._v("清空筛选条件")])],1),e._v(" "),r("div",{staticClass:"pull-right"},[r("Button",{attrs:{type:"primary"},on:{click:e.sureFilter}},[e._v("确定筛选")])],1)]),e._v(" "),r("i-form",{attrs:{model:e.filterForm,refs:"filterForm"}},[r("form-item",{attrs:{label:"联系人姓名："}},[r("Input",{model:{value:e.filterForm.username,callback:function(t){e.$set(e.filterForm,"username",t)},expression:"filterForm.username"}})],1),e._v(" "),r("form-item",{attrs:{label:"报修区域："}},[r("Select",{model:{value:e.filterForm.regionName,callback:function(t){e.$set(e.filterForm,"regionName",t)},expression:"filterForm.regionName"}},e._l(e.regionLists,function(t,a){return r("Option",{key:a,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("form-item",{attrs:{label:"服务网点："}},[r("Select",{model:{value:e.filterForm.repairStationId,callback:function(t){e.$set(e.filterForm,"repairStationId",t)},expression:"filterForm.repairStationId"}},e._l(e.stationLists,function(t,a){return r("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("form-item",{attrs:{label:"服务分类"}},[r("Select",{on:{"on-change":function(t){return e.repairFirstChange(t,"filter")}},model:{value:e.filterForm.repairCategoryParentId,callback:function(t){e.$set(e.filterForm,"repairCategoryParentId",t)},expression:"filterForm.repairCategoryParentId"}},e._l(e.repairFirst,function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("form-item",{attrs:{label:"服务项目"}},[r("Select",{attrs:{placeholder:"请先选择服务分类","not-found-text":"服务项目列表为空，请先选择服务分类"},model:{value:e.filterForm.repairCategoryId,callback:function(t){e.$set(e.filterForm,"repairCategoryId",t)},expression:"filterForm.repairCategoryId"}},e._l(e.repairSecond,function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("form-item",{attrs:{label:"工单编号"}},[r("Input",{model:{value:e.filterForm.orderSn,callback:function(t){e.$set(e.filterForm,"orderSn",t)},expression:"filterForm.orderSn"}})],1),e._v(" "),r("form-item",{attrs:{label:"服务人员"}},[r("Input",{model:{value:e.filterForm.serviceUserName,callback:function(t){e.$set(e.filterForm,"serviceUserName",t)},expression:"filterForm.serviceUserName"}})],1),e._v(" "),r("form-item",{attrs:{label:"联系电话"}},[r("Input",{attrs:{number:!0,maxlength:11},on:{"on-blur":function(t){e.validateTel(e.filterForm.userPhone)}},model:{value:e.filterForm.userPhone,callback:function(t){e.$set(e.filterForm,"userPhone",t)},expression:"filterForm.userPhone"}}),e._v(" "),e.telValid?e._e():r("span",{staticClass:"text-red"},[e._v("请输入正确格式的手机号")])],1),e._v(" "),r("form-item",{attrs:{label:"工单状态"}},[r("div",{staticStyle:{clear:"both"}},[r("CheckboxGroup",{model:{value:e.filterForm.orderStateList,callback:function(t){e.$set(e.filterForm,"orderStateList",t)},expression:"filterForm.orderStateList"}},e._l(e.orderNav,function(t){return t.state?r("Checkbox",{key:t.state,attrs:{label:t.state}},[e._v(e._s(t.title))]):e._e()}))],1)]),e._v(" "),r("form-item",{attrs:{label:"是否上传证据"}},[r("i-switch",{attrs:{"true-value":"Y","false-value":""},model:{value:e.filterForm.hasEvidence,callback:function(t){e.$set(e.filterForm,"hasEvidence",t)},expression:"filterForm.hasEvidence"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("是")])])],1),e._v(" "),r("form-item",{attrs:{label:"是否有回访记录"}},[r("i-switch",{attrs:{"true-value":"Y","false-value":""},model:{value:e.filterForm.hasReturnVisit,callback:function(t){e.$set(e.filterForm,"hasReturnVisit",t)},expression:"filterForm.hasReturnVisit"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("是")])])],1),e._v(" "),r("form-item",{attrs:{label:"质保中"}},[r("i-switch",{attrs:{"true-value":"Y","false-value":""},model:{value:e.filterForm.isWarranty,callback:function(t){e.$set(e.filterForm,"isWarranty",t)},expression:"filterForm.isWarranty"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("是")])])],1),e._v(" "),r("form-item",{attrs:{label:"售后记录"}},[r("i-switch",{attrs:{"true-value":"Y","false-value":""},model:{value:e.filterForm.afterSaleRecord,callback:function(t){e.$set(e.filterForm,"afterSaleRecord",t)},expression:"filterForm.afterSaleRecord"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("是")])])],1),e._v(" "),r("form-item",{attrs:{label:"客户评价"}},[r("Select",{model:{value:e.filterForm.commentState,callback:function(t){e.$set(e.filterForm,"commentState",t)},expression:"filterForm.commentState"}},[r("Option",{attrs:{value:""}},[e._v("全部")]),e._v(" "),r("Option",{attrs:{value:"2"}},[e._v("满意")]),e._v(" "),r("Option",{attrs:{value:"3"}},[e._v("不满意")]),e._v(" "),r("Option",{attrs:{value:"1"}},[e._v("暂未评价")])],1)],1),e._v(" "),r("form-item",{attrs:{label:"渠道来源"}},[r("Select",{model:{value:e.filterForm.orderSource,callback:function(t){e.$set(e.filterForm,"orderSource",t)},expression:"filterForm.orderSource"}},[r("Option",{attrs:{value:"APP"}},[e._v("APP")]),e._v(" "),r("Option",{attrs:{value:"CALL_CENTER"}},[e._v("呼叫中心")]),e._v(" "),r("Option",{attrs:{value:"STATION"}},[e._v("服务网点")])],1)],1),e._v(" "),r("form-item",{attrs:{label:"创建时间"}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{options:e.filterDateOptions,type:"daterange"},on:{"on-change":e.filterDateChange},model:{value:e.filterForm.dateRange,callback:function(t){e.$set(e.filterForm,"dateRange",t)},expression:"filterForm.dateRange"}})],1)],1)],1)],1)},staticRenderFns:[]};var f=r("VU/8")(u,d,!1,function(e){r("1Zcg")},"data-v-16cc2fe0",null);t.default=f.exports},"1Zcg":function(e,t){},fCQE:function(e,t){},spv5:function(e,t,r){"use strict";var a=r("Dd8w"),i=r.n(a),n=r("TVG1"),s={name:"createOrder",data:function(){return{serviceType:"",repairFirst:[],filterRegionLists:[],userType:null,userDiscount:[],needAccept:!1,loadingSubmit:!1,loadingSearch:!1,acceptFee:!1,filterRegionListsTemp:[],searchTelRes:[],newOrder:{repairRegionId:"",repairCategoryId:"",userPhone:"",ysyUserPhone:"",repairAddress:"",username:"",door:null,unit:null,estate:""},newOrderRule:{unit:[{required:!0,message:"请输入楼栋号",trigger:"change",type:"number"}],door:[{required:!0,message:"请输入门牌号",trigger:"change",type:"number"}],repairCategoryId:[{required:!0,message:"请选择报修分类",trigger:"change"}],estate:[{required:!0,message:"请选择报修区域",trigger:"change"}],username:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],userPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:function(e,t,r){/^1[3456789]\d{9}$/.test(t)||t.length<=0?r():r(new Error("请输入正确格式的手机号码"))},trigger:"blur"}]},ysyTelSearch:!1,repairDisSearch:!1,repairLists:[],regionList:[],ysyUserPhoneValid:!0}},props:{createOrder:Boolean},computed:{activeModal:{get:function(){return this.createOrder},set:function(e){this.filterRegionLists=this.filterRegionListsTemp,this.needAccept=!1,this.newOrder.door=null,this.newOrder.unit=null,this.userType=null,this.$emit("close","createModal"),this.$refs.newOrder.resetFields()}}},methods:{repairFirstChange:function(e){var t=this;n.a.getRepairTypeNext(e,function(e){t.repairLists=e,t.newOrder.repairCategoryId=""})},setEstate:function(e){if(e){var t="";this.filterRegionLists.map(function(r){r.name===e&&(t=r.id)}),this.newOrder.repairRegionId=t}},repairChange:function(e){if(e){var t=e.split("+"),r=t[0],a=this.repairLists.some(function(e){if(e.id===r&&"免上门费"===e.discount)return!0});t[1]>0&&!a?this.needAccept=!0:this.needAccept=!1}},setTel:function(e){if(e.length<=0)return this.ysyUserPhoneValid=!0,void(this.newOrder.ysyUserPhone="");/^1[3456789]\d{9}$/.test(e)?(this.ysyUserPhoneValid=!0,this.newOrder.ysyUserPhone=e):this.ysyUserPhoneValid=!1},searchThis:function(e){this[e+"Search"]=!0},sureSearch:function(e,t){this.newOrder[e]=t,this[e+"Search"]=!1},localFilterRegion:function(e){this.userType=null;var t=this.regionList.filter(function(t){return t.name.indexOf(e)>-1});this.filterRegionLists=t},getRegionLists:function(){var e=this;this.$http.get("/repair/region/list").then(function(t){0===t.data.code?(e.regionList=t.data.data,e.filterRegionLists=e.filterRegionListsTemp=e.regionList):console.log("新建工单获取报修区域："+t.data.msg)})},sureSend:function(){var e=this;this.loadingSubmit=!0,this.$refs.newOrder.validate(function(t){if(t){var r=i()({},e.newOrder);r.repairAddress=r.estate+"-"+r.unit+"-"+r.door,delete r.unit,delete r.door,delete r.estate;var a=e.newOrder.repairCategoryId.split("+");if(r.repairCategoryId=a[0],e.needAccept&&!e.acceptFee)return e.$Message.info("请先勾选接受上门费，再继续"),e.loadingSubmit=!1,!1;e.$http.post("/repair/order/add",i()({},r)).then(function(t){0===t.data.code?(e.$Message.success("保存成功"),e.activeModal=!1,e.newOrder={repairRegionId:"",repairCategoryId:"",userPhone:"",ysyUserPhone:"",repairAddress:"",username:"",door:null,unit:null,estate:null},e.needAccept=!1):(e.$Message.error("保存失败："+t.data.msg),e.activeModal=!1),e.loadingSubmit=!1})}else e.loadingSubmit=!1})},searchTel:function(e){var t=this;""!==e?(this.loadingSearch=!0,this.$http.get("/repair/order/user/list?phone="+e).then(function(e){t.loadingSearch=!1,0===e.data.code&&(t.searchTelRes=e.data.data)})):this.searchTelRes=[]},searchUser:function(){var e=this,t=this.newOrder.estate,r=this.newOrder.unit,a=this.newOrder.door;if(t)if(r&&a){if(console.log(this.serviceType),this.serviceType.length<=0)return this.$Message.info("请选择服务分类"),!1;n.a.getRepairTypeNext(this.serviceType,function(t){e.repairLists=t,e.newOrder.repairCategoryId=""}),this.$http.get("/repair/order/discount/dtd/categories?address="+t+"-"+r+"-"+a).then(function(t){if(0===t.data.code){var r=t.data.data;e.userDiscount=r,r.length>0?e.userType="SVIP用户":e.userType="普通用户";var a=e.repairLists;r.forEach(function(e){var t=e.id,r=void 0;r=0===e.rate?"免上门费":e.rate>0?"折扣："+e.rate:"",a.forEach(function(e){e.id===t&&(e.discount=r)})}),e.repairLists=a}})}else this.$Message.info("请输入楼栋以及门牌号");else this.$Message.info("请选择报修区域")}},mounted:function(){}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{attrs:{"mask-closable":!1,title:"新建工单"},model:{value:e.activeModal,callback:function(t){e.activeModal=t},expression:"activeModal"}},[r("div",{staticClass:"new_order_wrapper"},[r("i-form",{ref:"newOrder",attrs:{model:e.newOrder,rules:e.newOrderRule,"label-position":"top"}},[r("form-item",{attrs:{label:"一生约绑定手机（非必填）",prop:"ysyUserPhone"}},[r("Select",{attrs:{filterable:"",remote:"","remote-method":e.searchTel,loading:e.loadingSearch},on:{"on-query-change":e.setTel},model:{value:e.newOrder.ysyUserPhone,callback:function(t){e.$set(e.newOrder,"ysyUserPhone",t)},expression:"newOrder.ysyUserPhone"}},e._l(e.searchTelRes,function(t,a){return r("Option",{key:a,attrs:{value:t}},[e._v(e._s(t))])})),e._v(" "),e.ysyUserPhoneValid?e._e():r("span",{staticClass:"text-red"},[e._v("请填写正确的手机号")])],1),e._v(" "),r("form-item",{attrs:{label:"联系人姓名",prop:"username"}},[r("Input",{attrs:{maxlength:10},model:{value:e.newOrder.username,callback:function(t){e.$set(e.newOrder,"username",t)},expression:"newOrder.username"}})],1),e._v(" "),r("form-item",{attrs:{label:"联系电话",prop:"userPhone"}},[r("Input",{model:{value:e.newOrder.userPhone,callback:function(t){e.$set(e.newOrder,"userPhone",t)},expression:"newOrder.userPhone"}})],1),e._v(" "),r("form-item",{attrs:{label:"报修小区",prop:"estate"}},[r("Select",{attrs:{filterable:"",loading:e.loadingSearch},on:{"on-change":e.setEstate},model:{value:e.newOrder.estate,callback:function(t){e.$set(e.newOrder,"estate",t)},expression:"newOrder.estate"}},e._l(e.filterRegionLists,function(t,a){return r("Option",{key:a,attrs:{value:t.name}},[e._v(e._s(t.name))])})),e._v(" "),e.ysyUserPhoneValid?e._e():r("span",{staticClass:"text-red"},[e._v("请设置报修小区")])],1),e._v(" "),r("form-item",{attrs:{label:"详细地址"}},[r("Row",{attrs:{gutter:10}},[r("Col",{attrs:{span:"5"}},[r("form-item",{attrs:{prop:"unit"}},[r("InputNumber",{attrs:{precision:0},on:{"on-change":function(t){e.userType=null}},model:{value:e.newOrder.unit,callback:function(t){e.$set(e.newOrder,"unit",t)},expression:"newOrder.unit"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"3"}},[e._v("楼栋")]),e._v(" "),r("Col",{attrs:{span:"5"}},[r("form-item",{attrs:{prop:"door"}},[r("InputNumber",{attrs:{precision:0},on:{"on-change":function(t){e.userType=null}},model:{value:e.newOrder.door,callback:function(t){e.$set(e.newOrder,"door",t)},expression:"newOrder.door"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"3"}},[e._v("门牌号")]),e._v(" "),r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{size:"small",type:"primary"},on:{click:e.searchUser}},[e._v("查询客户身份")])],1)],1)],1),e._v(" "),r("form-item",{staticClass:"must",attrs:{label:"服务类型"}},[r("Select",{on:{"on-change":function(t){return e.repairFirstChange(t)}},model:{value:e.serviceType,callback:function(t){e.serviceType=t},expression:"serviceType"}},e._l(e.repairFirst,function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("form-item",{attrs:{label:"服务项目"+(null===e.userType?"":"（"+e.userType+"）"),prop:"repairCategoryId"}},[r("Row",{attrs:{gutter:15}},[r("Col",{attrs:{span:"14"}},[r("Select",{attrs:{placeholder:"请先查询客户身份",disabled:null===e.userType},on:{"on-change":e.repairChange},model:{value:e.newOrder.repairCategoryId,callback:function(t){e.$set(e.newOrder,"repairCategoryId",t)},expression:"newOrder.repairCategoryId"}},e._l(e.repairLists,function(t){return r("Option",{key:t.id,attrs:{value:t.id+"+"+t.dtdServiceFee}},[e._v("\n                  "+e._s(t.name)+e._s(t.dtdFee?"(上门费：￥"+t.dtdFee+")":"")+" "+e._s(t.discount?"-"+t.discount:"")+"\n                ")])}))],1),e._v(" "),e.needAccept?r("Col",{attrs:{span:"8"}},[r("Checkbox",{attrs:{disabled:null===e.userType},model:{value:e.acceptFee,callback:function(t){e.acceptFee=t},expression:"acceptFee"}},[e._v("接受上门费")])],1):e._e()],1)],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:function(t){e.activeModal=!1}}},[e._v("取消")]),e._v(" "),r("Button",{attrs:{loading:e.loadingSubmit,type:"primary"},on:{click:e.sureSend}},[e._v(e._s("svip"===e.userType?"发送至服务网点":"确认"))])],1)])],1)},staticRenderFns:[]};var l=r("VU/8")(s,o,!1,function(e){r("fCQE")},"data-v-a9ce3ac4",null);t.a=l.exports}});